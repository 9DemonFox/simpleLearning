# 7. AHP 层次分析法

## 7.1 示例

**例1** 某工厂有一笔企业留成利润，需要决定如何分配使用。已经决定有三种用途：奖金、集体福利措施、引进技术设备。考察准则也有三个：是否能调动职工的积极性、是否有利于提高技术水平、考虑改善职工生活条件。建立如下图所示层次模型：

![img](https://pic2.zhimg.com/80/v2-c53bf11d967d88516fea25490b77e195_720w.jpg)



经过工厂决策人员讨论，得到如下判断矩阵：

（1）第2层对第1层。

三个元素C1, C2, C3都受A支配，判断矩阵C{1}{1,1}为

![img](https://pic4.zhimg.com/80/v2-1445c224af1b3a3d633a3affae226b3f_720w.jpg)

相应的逻辑数组C{1}{2,1}为[true true true]。



（2）第3层对第2层。

1）第3层对第2层第1个元素C1：

受C1支配的只有两个元素P1和P2，判断矩阵C{2}{1,1}为

![img](https://pic1.zhimg.com/80/v2-831acaf083d11b9f957327a5e8324984_720w.jpg)

2）第3层对第2层第2个元素C2：

受C2支配的只有两个元素P2和P3，判断矩阵C{2}{1,2}为

![img](https://pic1.zhimg.com/80/v2-625189462564169ac9ab58f693dd8bbc_720w.jpg)

3）第3层对第2层第3个元素C3：

受C3支配的只有两个元素P1和P2，判断矩阵C{2}{1,3}为

![img](https://pic3.zhimg.com/80/v2-76edd934dc056979cf534e8355d01706_720w.jpg)

示例中**输入数据**如下：

```
        trainX = {'method': 'eigenvalue',
                  'name': '合理使用留成利润',
                  'criteria': ['调动职工积极性', '提高技术水平', '改善职工生活条件'],
                  'preferenceMatrices': {'criteria': [['1', '0.2', '0.33'],  # 准则层
                                                      ['5', '1', '3'],
                                                      ['3', '0.33', '1']],
                                         'subCriteria:调动职工积极性': [['1', '0.33'],
                                                                 ['3', '1']],
                                         'subCriteria:提高技术水平': [['1', '0.2'],
                                                                ['5', '1']],
                                         'subCriteria:改善职工生活条件': [['1', '0.5'],
                                                                  ['2', '1']],
                                         },
                  'subCriteria': {'调动职工积极性': ['奖金', '集体福利'],  # 决策层
                                  '提高技术水平': ['集体福利', '引进设备技术'],
                                  '改善职工生活条件': ['奖金', '集体福利'],
                                  }
                  }
```

输入数据示例2：

```
 trainX = {'criteria': ['子准则层1', '子准则层2', '子准则层3', '子准则层4', '子准则层5'],
                  'method': 'eigenvalue',
                  'name': '画像',
                  'preferenceMatrices': {'criteria': [['1', '1', '2', '1', '2'],  # 准则层
                                                      ['1', '1', '2', '1', '1'],
                                                      ['0.5', '0.5', '1', '1', '1'],
                                                      ['1', '1', '1', '1', '2'],
                                                      ['0.5', '1', '1', '0.5', '1']],
                                         'subCriteria:子准则层1': [['1', '1', '1', '1'],
                                                               ['1', '1', '1', '1'],
                                                               ['1', '1', '1', '1'],
                                                               ['1', '1', '1', '1']],
                                         'subCriteria:子准则层2': [['1', '2'], ['0.5', '1']],
                                         'subCriteria:子准则层3': [['1']],
                                         'subCriteria:子准则层4': [['1', '3'], ['0.33', '1']],
                                         'subCriteria:子准则层5': [['1', '2', '3'],
                                                               ['0.5', '1', '2'],
                                                               ['0.33', '0.5', '1']]},
                  'subCriteria': {'子准则层1': ['兽残不合格量', '毒素不合格量', '污染物不合格量', '重金属不合格量'],  # 决策层
                                  '子准则层2': ['U1占比', '综合合格率'],
                                  '子准则层3': ['周期内预警触发次数*'],
                                  '子准则层4': ['牧场整改率', '牧场食品安全评审结果'],
                                  '子准则层5': ['主要理化指标Cpk*', '体细胞Cpk*', '微生物Cpk*']}}
```

